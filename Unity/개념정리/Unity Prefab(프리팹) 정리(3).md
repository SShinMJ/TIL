# 프리팹 배리언트 - 자식과 자식의 하위 자식들만 변경

프리팹 배리언트를 사용하면 프로젝트를 일관적으로 보이게 해 주는 일련의 상호 연관된 프리팹을 매우 간편하게 생성할 수 있다. 

<br>

예를 들어 많은 나무가 있는 프로젝트에서 나무의 기본 프리팹을 생성한 후 해당 프리팹의 사과 나무 및 복숭아 나무 배리에이션을 만들 수 있다.

![image](https://github.com/SShinMJ/TIL/assets/82142527/93768a7a-610d-44bc-9dbe-3157a2927b45)

프리팹 배리언트를 변경하면 해당 프리팹 배리언트에서 파생된 인스턴스만 변경된다.

기본 나무 프리팹을 변경하면 모든 사과 나무와 복숭아 나무에 변경 사항이 적용된다. 복숭아 나무 배리언트만 변경하면 복숭아 나무에만 변경 사항이 적용되게 된다.

<br>

BouncyBall의 프리팹 배리언트를 만드는 방법은 다음과 같다.

  1. 다른 인스턴스와 머티리얼을 다르게 설정했던 BouncyBall 인스턴스를 선택한다.
  
  2. 계층 구조에서 이 인스턴스를 Prefabs 폴더로 드래그한다. 새로운 원본 프리팹 또는 프리팹 배리언트를 생성할지 묻는 메시지 프롬프트가 표시된다.

     ![image](https://github.com/SShinMJ/TIL/assets/82142527/d2adfc9f-ab29-45fd-babe-12d762eca031)
  
  4. 'Prefab Variant'를 선택한다. **Original Prefab**을 선택하면 원본 프리팹에 대한 변경 사항이 프리팹 배리언트로 전파되지 않게된다.
  
  5. 프로젝트 창의 **Prefabs** 폴더에서 새 프리팹의 이름을 'RedBouncyBall'과 같이 쉽게 알 수 있는 이름으로 변경한다.
  
  6. 새로운 탱탱볼을 더 많이 생성하려면, 새로운 프리팹의 새 인스턴스를 씬으로 드래그하고 구조물 위에 떨어지도록 위치를 변경한다.

     ![image](https://github.com/SShinMJ/TIL/assets/82142527/3b2cef48-2f9b-4d7b-b098-a232fbcfe65b)

<br>

**+ 프리팹 중첩**

  한 타입의 오브젝트가 다른 오브젝트의 일부가 되어야 하는 경우 프리팹을 다른 프리팹 내에 중첩할 수 있다. 
  
  예를 들어 플레이어가 나무에서 과일을 채집하는 게임에는 사과, 배, 복숭아 프리팹이 있다고 하자.
  이 과일들은 각각 사과 나무, 배 나무, 복숭아 나무에서 자란다. 이와 같은 과일 나무도 프리팹에 해당되며, 과일 프리팹은 나무 프리팹 내에 중첩된다.
  
  <br>
  
  이와 같은 중첩된 프리팹을 만드는 방법은 아래와 같다.
  
  1. 빈 3D 게임 오브젝트를 만들고 Prefabs 폴더로 드래그하고, 프리팹 이름을 지정한다.
  
  2. 프리팹 모드에서 프리팹을 편집한다.
  
  3. 다른 프리팹을 Prefabs 폴더에서 새 프리팹으로 드래그한다.
  
  4. 이 오브젝트를 씬에 추가하고 오브젝트가 떨어지는 모습을 확인하여 중첩 프리팹이 되었는 지 확인할 수 있다.
     
  - 팁 : 네스티드 프리팹에 있는 하나 이상의 오브젝트에 물리 머티리얼이 포함된 경우, 개별 프리팹은 독립적으로 동작하고 복잡한 셰이프가 떨어지며 분리됩니다. 하지만 물리 머티리얼이 적용된 오브젝트가 없으면 복잡한 셰이프는 뭉친 상태로 떨어집니다.
