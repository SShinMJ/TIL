# Unity Prefab(프리팹) - 프리팹 생성하고 머터리얼 변경해보기

- ### 정의
  [Prefab 공식 문서](https://docs.unity3d.com/kr/2018.4/Manual/Prefabs.html)
  
  일반적으로 많은 게임 오브젝트가 다른 게임 오브젝트의 복사본이 된다. 즉, 많은 수의 동일한 캐릭터 복사본, 엄폐할 수 있는 동일한 모양의 바위, 동일한 모양의 나무, 무기, 수집품이 존재할 수 있다.

  이 경우, 변경 사항이 생겼을 때 하나하나 수동으로 바꾸는 것은 비효율 적이므로, 한번에 바꿀 수 있는 기능이 필요하다.

  <br>

  이를 위해 존재하는 것이 프리팹 기능이다. 프리팹을 사용하면 복제된 게임 오브젝트를 체계적으로 관리할 수 있다.

  프리팹은 게임 오브젝트의 템플릿 역할을 하는 에셋이다. 프리팹으로부터 인스턴스라고 부르는 여러 복사본을 생성할 수 있다. 프리팹 에셋을 변경하면 해당 인스턴스도 모두 변경된다.

  <br><br>

- ### 프리팹 생성 예시
    
    1. 떨어지는 원본 구체 게임 오브젝트의 이름을 'BouncyBall'이라고 지정한다.
    
    2. 'BouncyBall'에 일반 머티리얼과 물리 머티리얼을 하나씩 지정한다. 원하는 경우 크기도 조정한다. 이 구체의 복사본을 대량으로 생성하고자 한다.
    
    3. 머티리얼과 마찬가지로, 프리팹에 대한 폴더를 만든다. 프로젝트 창에서 **Assets** 폴더를 선택하고 오른쪽 클릭하여 **Create** > **Folder**를 선택한다.
    
    4. 새 폴더의 이름을 'Prefabs'로 변경한다.
    
    5. 프로젝트 창의 오른쪽 창(2열 레이아웃)에 빈 폴더가 표시되도록 폴더를 연다. (여기에 "This folder is empty" 메시지가 나타난다.)
    
    6. 계층 창에서 'BouncyBall'을 'Prefabs' 폴더로 드래그한다. 파란색 큐브 아이콘으로 표시되는 'Prefabs' 폴더의 새 에셋이 프리팹이다.

       이제 계층 구조에서 'BouncyBall' 게임 오브젝트도 파란색으로 표시되어, 이 오브젝트가 프리팹의 인스턴스임을 나타낸다.

       ![image](https://github.com/SShinMJ/TIL/assets/82142527/78de95ac-7f5f-42c5-be75-e53c877bb860)

<br><br>

- ### 프리팹 인스턴스 생성하기
    
    1.  프로젝트 창의 **Prefabs** 폴더에서 **BouncyBall** 프리팹을 씬으로 드래그한다.
    
    **팁**: 씬 뷰 또는 계층 구조에서 **Shift** 키를 누른 상태에서 모든 새 인스턴스를 한 번에 선택하여 그룹으로 배치할 수 있다.
    
<br><br>

- ### 프리팹 모드에서 프리팹 인스턴스를 업데이트 하기
    
  **프리팹 모드**에서 프리팹을 업데이트하여 컬러를 한 번에 모두 변경할 수 있다. 프리팹 모드는 씬 창에서 프리팹을 변경할 수 있는 특수한 편집 상태다.
    
  프리팹을 편집하는 프리팹 모드를 시작하는 방법은 다음과 같다.
    
  1. 계층 구조에서 프리팹 인스턴스를 선택하고 행 오른쪽에 있는 화살표를 선택한다.
    
      ![image](https://github.com/SShinMJ/TIL/assets/82142527/9113436f-b276-452c-afab-cb293cad298a)
    
    !팁 : 기본적으로 프리팹 모드는 씬의 컨텍스트에서 나타난다. 프리팹을 따로 편집하려면 **Alt** 키를 누른 상태에서 화살표를 선택하면 된다.
    
    프리팹 모드에서 프리팹은 편집할 수 있는 유일한 게임 오브젝트이다.
    
    ![image](https://github.com/SShinMJ/TIL/assets/82142527/3a23f021-7caf-4ec5-a840-0381d5fe0f17)
  
<br>
    
  2. 프로젝트 창에서 Materials 폴더를 열고 다른 머티리얼을 씬 창의 프리팹으로 드래그한다. 눈에 띄게 다른 머티리얼을 선택하자.
    
  <br>
    
  3. 씬 창의 오른쪽 상단 근처에 있는 **Save**를 선택하여 변경 사항을 저장한다. 이 단계를 건너뛰면 프리팹 모드를 종료할 때 저장하라는 메시지가 표시된다. 또한 **Auto Save**를 활성화하여 편집하는 사항을 즉시 저장할 수도 있다.
    
  <br>
    
  4. 프리팹 모드를 종료하려면 계층 창의 왼쪽 상단에 있는 화살표를 선택한다.

     ![image](https://github.com/SShinMJ/TIL/assets/82142527/2126b029-238f-4258-8b61-4298770094d3)

     모든 BouncyBall 인스턴스에 새로운 머티리얼이 적용된다.

  <br><br>
  
  위와 같은 간단한 예시를 외에도, 프리팹은 아래와 같은 매우 강력한 기능을 제공한다.
  - 한 도시 모델에 100개의 주차 미터기가 있다. 이 경우 모든 주차 미터기의 텍스트를 한 번에 변경할 수 있다.
  - 게임 프로토타입에서 동료가 적 캐릭터를 모델링하는 동안 여러분은 게임플레이를 구성하고 있다. 적 캐릭터의 플레이스홀더는 캡슐 프리미티브 프리팹다. 적 캐릭터를 임포트할 준비가 되면 프리팹의 캡슐 오브젝트를 새 모델로 간편하게 교체할 수 있다.
